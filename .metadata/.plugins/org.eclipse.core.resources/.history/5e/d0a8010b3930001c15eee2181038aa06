package com.ICINBank.ICINbanking.controller;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.servlet.ModelAndView;

import com.ICINBank.ICINbanking.POJO.TransferDetailPOJO;
import com.ICINBank.ICINbanking.model.ChequeBook;
import com.ICINBank.ICINbanking.model.Customer;
import com.ICINBank.ICINbanking.service.CustomerService;

@Controller
public class FundsTransferController {
	
	@Autowired
	private CustomerService customerService;
	
	@GetMapping(value="/transferFund")
	public ModelAndView getFundsTransferPage() {
		ModelAndView fundTransfertMV = new ModelAndView();
		fundTransfertMV.setViewName("FundTransfer");
		fundTransfertMV.addObject("transferDetailPOJO",new TransferDetailPOJO());
		return fundTransfertMV;
	}
	
	@PostMapping(value="/transferFund")
	public ModelAndView verifyAndTransferFund(@ModelAttribute("transferDetailPOJO") TransferDetailPOJO transferDetailPOJO,BindingResult bindingResult,HttpServletRequest request) {
		Customer cust = customerService.getCustomerBySessionVar(request);
		ModelAndView fundTransfertMV = new ModelAndView();
//		userService.authenticateUser(user, bindingResult);
		if(bindingResult.hasErrors()) {
			fundTransfertMV.setViewName("FundTransfer");
			return fundTransfertMV;
		}
		fundTransfertMV.setViewName("homePage");
	
		
		return fundTransfertMV;
	}
	

}
